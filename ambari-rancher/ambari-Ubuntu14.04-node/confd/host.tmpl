#hosts generated by confd
127.0.0.1       localhost
{{ $rp_link := split (getenv "AMBARI_REPO") "/" }}{{$rp_stack := index $rp_link 0}}{{ $rp_service := index $rp_link 1}}{{range $i, $e := ls (printf "/stacks/%s/services/%s/containers" $rp_stack $rp_service)}}{{if $i}}{{printf "\n"}}{{end}}{{getv (printf "/stacks/%s/services/%s/containers/%s/primary_ip" $rp_stack $rp_service $e)}}    public-repo-1.hortonworks.com{{end}}
{{range $i, $containername := ls "/containers"}}{{if (ne (getv (printf "/containers/%s/stack_name" $containername)) "null")}}{{$stackname := getv (printf "/containers/%s/stack_name" $containername)}}{{if (ne (getv (printf "/containers/%s/service_name" $containername)) "null")}}{{$servicename := getv (printf "/containers/%s/service_name" $containername)}}{{if (gt (len (ls (printf "/stacks/%s/services/%s/containers" $stackname $servicename))) 1)}}{{getv (printf "/containers/%s/primary_ip" $containername)}}	{{getv (printf "/containers/%s/name" $containername)}}{{printf "\n"}}{{else}}{{getv (printf "/containers/%s/primary_ip" $containername)}}	{{getv (printf "/containers/%s/service_name" $containername)}}{{printf "\n"}}{{end}}{{end}}{{end}}{{end}}
